<div class="site-wrapper" id="job-runner">
  <div class="container">

    <div class="row">
      <h3>Job {{controller.jobId}}</h3>
    </div>

    <div class="row">
      <div ng-class="{
      'col-xs-12 col-md-12 vcenter' : !controller.job.id,
      'col-xs-6 col-md-6 center' : controller.job.id}">
        <div class="code-mirror-box">
          <code-mirror lang="controller.lang"
                       theme="controller.theme"
                       code="controller.job.okScript.code">
          </code-mirror>
          <div class="ok-button">
            <a href="" ng-click="controller.addOkScript()">
              <i class="fa fa-circle-o ok-icon"></i>
            </a>
          </div>
        </div>
        <div class="vcenter fail-button">
          <a href="" ng-click="controller.addFailScript()">
            <i class="fa fa-circle-o fail-icon"></i>
          </a>
        </div>
      </div>

      <div ng-if="controller.hasFailScript || controller.job.id" class="col-xs-6 col-md-6 vcenter">
        <div class="code-mirror-box">
          <code-mirror lang="controller.lang"
                       theme="controller.theme"
                       code="controller.job.okScript.errorScript.code">
          </code-mirror>
        </div>
      </div>
    </div>

    <div ng-if="controller.hasOkScript || controller.job.id" class="row">
      <div class="col-xs-12 col-md-12">
        <div class="code-mirror-box">
          <code-mirror lang="controller.lang"
                       theme="controller.theme"
                       code="controller.job.okScript.okScript.code">
          </code-mirror>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-md-12 mtop">
        <button type="button"
                class="btn btn-lg btn-primary"
                ng-click="controller.save()">
          Save
        </button>
        <button type="button"
                ng-show="controller.jobId"
                class="btn btn-lg btn-primary"
                ng-click="controller.run()">
          Run
        </button>
        <i class="fa fa-spinner fa-spin out-spinner"
           ng-show="controller.status.started && !controller.status.ended"></i>
        <i class="fa fa-check job-ok"
           ng-show="controller.status.exitCode === 0"></i>
         <i class="fa fa-times job-error"
            ng-show="controller.status.exitCode && controller.status.exitCode !== 0"></i>
      </div>
    </div>

    <div ng-if="controller.status.out" class="row">
      <div class="col-xs-12 col-md-12">
        <div class="output-box">
          <pre class="log" scroll-glue>{{controller.status.out}}</pre>
        </div>
      </div>
    </div>

  </div>
</div>
